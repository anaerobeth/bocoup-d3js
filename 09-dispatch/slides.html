<html>
  <head>
    <title>d3.js: Dispatch</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" href="assets/deck.css">
    <script src="vendor/jquery.min.js" type="text/javascript"></script>
  </head>
</html>
<body>
  <textarea id="source">class:middle,center

# d3.js: Dispatch

---

# What is a dispatch object?

A dispatch object is a little bit like a radio. You can make many channels on
one dispatch object and then call them with data. Listeners to your channels will
recieve that data and can act accordingly.

Example: http://bl.ocks.org/mbostock/5872848

---

# Making a dispatch object

1. Make a dispatch object with many `types` (or what I call channels):

  ```javascript
  var dispatch = d3.dispatch("type1", "type2", "type3");
  ```
2. Define listeners to your dispatch:

  ```javascript
  dispatch.on("type1", function(state) {
    someSelection.property("value", state.id);
  });
  ```

  Because you can only have **one** listener per event, you should name your events like so:

  ```javascript
  dispatch.on("type1.menu", function(state) {
    someSelection.property("value", state.id);
  });
  ```

---

# Making a dispatch object

3.&nbspIn the appropriate place in your code, call those types:

```javascript
d3.selectAll("circle")
  .on("click", function(d) {
    dispatch.type1(d);
  });
```

---

# Preserving context

For example, if you wanted a native "click" event to your "custom" event, while preserving the context and arguments, you could say:

```javascript
selection.on("click", function(d, i) {
  dispatch.type1.apply(this, arguments);
});
```

---

class:middle,center

# Questions?

---

class:middle,center
# Code Time!
## Exercise: Dispatch
</textarea>
  <script src="vendor/remark.min.js" type="text/javascript"></script>
  <script type="text/javascript">
    var slideshow = remark.create();
  </script>
  <script src="vendor/underscore.js" type="text/javascript"></script>
  <script src="vendor/d3.js" type="text/javascript"></script>
  
</body>


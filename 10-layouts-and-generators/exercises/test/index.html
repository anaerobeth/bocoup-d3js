<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <title>Visualizing data with d3.js - Canvas Tests</title>

  <!-- QUnit styles -->
  <link rel="stylesheet" href="../vendor/test/qunit.css">
</head>

<body>
  <!-- QUnit stucture -->
  <div class="dataset-test">
    <h1 id="qunit-header">Challenge Test Suite</h1>
    <h2 id="qunit-banner"></h2>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
  </div>

  <div id="container" style="display:none;">
    <div id="visuals">
    </div>
  </div>

  <!-- Testing libs -->
  <script src="../vendor/test/qunit.js"></script>

  <!-- Application libs -->
  <script type="text/javascript" src="../vendor/d3.js"></script>
  <script type="text/javascript" src="../vendor/topojson.js"></script>
  <script type="text/javascript" src="../vendor/jquery.min.js"></script>
  <script type="text/javascript" src="../vendor/underscore.js"></script>
  <script type="text/javascript" src="../vendor/backbone.js"></script>

  <script src="//localhost:35729/livereload.js"></script>
  <script type="text/javascript" src="../assets/countrydata.js"></script>
  <script type="text/javascript" src="../app/setup.js"></script>
  <script type="text/javascript" src="../app/helpers.js"></script>
  <script type="text/javascript" src="../app/app.js"></script>

  <!-- TESTS -->
  <script type="text/javascript">

// test 1
test("Task 1: Treemap layout is defined", function() {
    ok(treemap.padding() === 4, "Treemap padding should be set to 4.");
    ok(_.isEqual(treemap.children()({ values : [1,2,3] }), [1,2,3]),
      "Treemap children method should return the values array of each datum.");
    ok(treemap.size()[0] === width && treemap.size()[1] === height,
      "Treemap size should be " + width + " x " + height);
    ok(treemap.value()({ current: { income : 3 }}) === 3,
      "Treemap value method should return the current income indicator value");
});

test("Task 2: Treemap cells are rendered", function() {
    var cells = viewer.selectAll('g.cell');
    var rects = viewer.selectAll('g.cell rect');
    ok(cells.size() === 201, "There should be a total of 201 cells rendered.");
    ok(rects.size() === 201, "There should be a total of 201 rects rendered. There are " + rects.size());
});

test("Task 3: Treemap labels are rendered", function() {
    var cells = viewer.selectAll('g.cell text');
    ok(cells.size() > 50, "There should be some labels rendered.");
});
</script>
</body>
</html>
